(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{292:function(t,s,n){"use strict";n.r(s);var e=n(38),a=Object(e.a)({},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"ios-äº‹ä»¶å“åº”é“¾"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ios-äº‹ä»¶å“åº”é“¾","aria-hidden":"true"}},[t._v("#")]),t._v(" iOS äº‹ä»¶å“åº”é“¾")]),t._v(" "),n("p"),n("div",{staticClass:"table-of-contents"},[n("ul",[n("li",[n("a",{attrs:{href:"#_0x0-ç®€ä»‹"}},[t._v("0x0. ç®€ä»‹")])]),n("li",[n("a",{attrs:{href:"#_0x1-æŸ¥æ‰¾å“åº”è€…"}},[t._v("0x1. æŸ¥æ‰¾å“åº”è€…")]),n("ul",[n("li",[n("a",{attrs:{href:"#_0x1-1-hittest-withevent"}},[t._v("0x1.1. hitTest:withEvent:")])])])]),n("li",[n("a",{attrs:{href:"#_0x2-å¤„ç†äº‹ä»¶"}},[t._v("0x2. å¤„ç†äº‹ä»¶")])])])]),n("p"),t._v(" "),n("h2",{attrs:{id:"_0x0-ç®€ä»‹"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_0x0-ç®€ä»‹","aria-hidden":"true"}},[t._v("#")]),t._v(" 0x0. ç®€ä»‹")]),t._v(" "),n("p",[t._v("iOS ä¸­çš„äº‹ä»¶ç±»å‹æœ‰"),n("code",[t._v("Touch event")]),t._v("ã€"),n("code",[t._v("Press events")]),t._v("ã€"),n("code",[t._v("Shake-motion events")]),t._v("ã€"),n("code",[t._v("Remote-control events")]),t._v("ï¼Œæœ¬æ–‡æš‚æ—¶åªåˆ†ææœ€å¸¸ç”¨çš„"),n("code",[t._v("Touch event")]),t._v("ã€‚")]),t._v(" "),n("p",[t._v("App ä½¿ç”¨ responder å¯¹è±¡ (UIResponderå®ä¾‹) æ¥"),n("strong",[t._v("æ¥æ”¶")]),t._v("å’Œ"),n("strong",[t._v("å¤„ç†")]),t._v("äº‹ä»¶ã€‚å¸¸è§çš„å­ç±»åŒ…æ‹¬ UIView, UIViewController å’Œ UIApplicationã€‚å½“ responder å¯¹è±¡æ¥æ”¶åˆ°åŸå§‹äº‹ä»¶æ•°æ®åï¼Œå¿…é¡»å¤„ç†äº‹ä»¶æˆ–å°†å…¶è½¬å‘ç»™å¦ä¸€ä¸ª responder å¯¹è±¡ã€‚")]),t._v(" "),n("p",[t._v("ğŸŒ´")]),t._v(" "),n("h2",{attrs:{id:"_0x1-æŸ¥æ‰¾å“åº”è€…"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_0x1-æŸ¥æ‰¾å“åº”è€…","aria-hidden":"true"}},[t._v("#")]),t._v(" 0x1. æŸ¥æ‰¾å“åº”è€…")]),t._v(" "),n("p",[t._v("äº‹ä»¶è¦æƒ³è¢«å¤„ç†ï¼Œå°±å¿…é¡»å¾—æœ‰ä¸ª responder æ¥å“åº”å®ƒã€‚é‚£ä¹ˆä¸€ä¸ªäº‹ä»¶æ˜¯å¦‚ä½•æ‰¾åˆ°å®ƒçš„ responder çš„å‘¢ï¼Ÿ")]),t._v(" "),n("h3",{attrs:{id:"_0x1-1-hittest-withevent"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_0x1-1-hittest-withevent","aria-hidden":"true"}},[t._v("#")]),t._v(" 0x1.1. "),n("code",[t._v("hitTest:withEvent:")])]),t._v(" "),n("p",[t._v("è¿™ä¸ªæ–¹æ³•ç›¸ä¿¡å¤§å®¶ä¸€å®šä¸é™Œç”Ÿï¼ŒUIKit ä¾¿æ˜¯ä½¿ç”¨è¿™ä¸ªæ–¹æ³• (ç‚¹å‡»æµ‹è¯•) æ¥æŸ¥æ‰¾è§¦æ‘¸äº‹ä»¶çš„å“åº”è€…ã€‚")]),t._v(" "),n("p",[t._v("è¯¥æ–¹æ³•å†…éƒ¨ä¼šè°ƒç”¨"),n("code",[t._v("pointInside:withEvent:")]),t._v("æ–¹æ³•ï¼š")]),t._v(" "),n("ul",[n("li",[t._v("å¦‚æœ"),n("code",[t._v("pointInside:withEvent:")]),t._v("è¿”å› YESï¼Œåˆ™ä¼šéå†å½“å‰è§†å›¾çš„æ‰€æœ‰ subviewï¼Œå¯¹æ¯ä¸ª subview ä¾æ¬¡è°ƒç”¨"),n("code",[t._v("hitTest:withEvent:")]),t._v("æ–¹æ³•ã€‚å¦‚æœ subview è¿˜æœ‰ subviewï¼Œåˆ™ä»¥æ­¤ç±»æ¨ï¼Œç›´åˆ°æ‰¾åˆ°åŒ…å«è§¦æ‘¸ä½ç½®çš„æœ€å‰é¢çš„è§†å›¾ (å³æœ€å add çš„è§†å›¾) ä¸ºæ­¢ã€‚")]),t._v(" "),n("li",[t._v("å¦‚æœ"),n("code",[t._v("pointInside:withEvent:")]),t._v("è¿”å› NOï¼Œé‚£ä¹ˆ"),n("code",[t._v("hitTest:withEvent:")]),t._v("æ–¹æ³•ä¼šè¿”å› nilï¼Œå¹¶ä¸”å½“å‰è§†å›¾çš„ subview ä¹Ÿä¸ä¼šè¢«éå†ã€‚")])]),t._v(" "),n("p",[t._v("subview çš„éå†é¡ºåºï¼Œæ˜¯ä»åå¾€å‰éå†ï¼Œå³å…ˆéå†æœ€å add çš„å­è§†å›¾ã€‚å½“ç„¶ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„ view éƒ½ä¼šéå†ï¼Œå¦‚æœä¸€ä¸ª view æ»¡è¶³ä¸‹åˆ—æ¡ä»¶ä»»æ„ä¸€ä¸ªæˆ–å¤šä¸ªï¼Œå°†ä¼šè¢«å¿½ç•¥ã€‚"),n("br"),t._v("1. hidden = YES"),n("br"),t._v("\n2. userInteraction = NO"),n("br"),t._v("\n3. alpha < 0.01")]),t._v(" "),n("p",[t._v("é€šè¿‡æ–­ç‚¹è°ƒè¯•ï¼Œæ¨æµ‹å‡ºä¼ªä»£ç å¦‚ä¸‹ï¼š")]),t._v(" "),n("div",{staticClass:"language-objectivec line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-objectivec"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" BOOL "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("_UIViewIgnoresTouchEvents")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("UIView "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("view"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("view"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("isUserInteractionEnabled "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" view"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("isHidden "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" view"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("alpha "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.01")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" YES"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" NO"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("UIView "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("hitTest"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("CGPoint"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("point withEvent"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("UIEvent "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("event "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("_UIViewIgnoresTouchEvents")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("self")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" nil"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("self")]),t._v(" pointInside"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("point withEvent"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("event"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" NO"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" nil"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    __block UIView "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("view "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" nil"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("self")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("subviews enumerateObjectsWithOptions"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("NSEnumerationReverse usingBlock"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__kindof UIView "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" _Nonnull obj"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" NSUInteger idx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" BOOL "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" _Nonnull stop"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        view "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("obj hitTest"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("point withEvent"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("event"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("view"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("stop "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" YES"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" view "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" view "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("self")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br")])]),n("p",[t._v("ç¨å¾®ç•™æ„ä¸‹ï¼Œä¼šå‘ç°è™½ç„¶ touch äº†ä¸€æ¬¡ï¼Œä½†æ˜¯"),n("code",[t._v("hitTest:withEvent:")]),t._v("å´è°ƒç”¨äº†ä¸¤æ¬¡ï¼Œå…³äºè¿™ä¸ªé—®é¢˜ï¼Œåªæ‰¾åˆ°äº†è¿™ä¹ˆä¸€ä¸ª"),n("a",{attrs:{href:"https://lists.apple.com/archives/cocoa-dev/2014/Feb/msg00118.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("å·®ä¸å¤šçš„è§£é‡Š"),n("OutboundLink")],1),t._v("ï¼š")]),t._v(" "),n("blockquote",[n("p",[t._v("Yes, itâ€™s normal. The system may tweak the point being hit tested between the calls. Since hitTest should be a pure function with no side-effects, this should be fine.")])]),t._v(" "),n("p",[t._v("ğŸŒ´")]),t._v(" "),n("h2",{attrs:{id:"_0x2-å¤„ç†äº‹ä»¶"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_0x2-å¤„ç†äº‹ä»¶","aria-hidden":"true"}},[t._v("#")]),t._v(" 0x2. å¤„ç†äº‹ä»¶")]),t._v(" "),n("p",[t._v("å½“æ‰¾åˆ° responder å¯¹è±¡æ—¶ï¼Œä¼šä¼˜å…ˆåˆ¤æ–­æ˜¯å¦å“åº”æ‰‹åŠ¿ã€‚å¦‚æœ responder ä¸Šæ·»åŠ äº†æ‰‹åŠ¿ï¼Œå¹¶ä¸”æ‰‹åŠ¿ä»£ç†æ–¹æ³•"),n("code",[t._v("gestureRecognizer:shouldReceiveTouch:")]),t._v("è¿”å› YESï¼Œé‚£ä¹ˆå°±ä¼šç›´æ¥å“åº”æ‰‹åŠ¿ã€‚")]),t._v(" "),n("p",[t._v("å¦‚æœæ²¡æœ‰æ‰‹åŠ¿å¯ä»¥å“åº”ï¼Œé‚£ä¹ˆå°±ä¼šè°ƒç”¨"),n("code",[t._v("touchesBegan:withEvent:")]),t._v("æ–¹æ³•ã€‚è‹¥æƒ³è‡ªå·±å¤„ç†äº‹ä»¶ï¼Œå¯ä»¥é‡å†™è¯¥æ–¹æ³•ï¼Œé‡å†™åï¼Œé€šå¸¸ä¸éœ€è¦è°ƒç”¨ superï¼Œåªéœ€å¤„ç†äº‹ä»¶å³å¯ã€‚å¦‚æœè°ƒ\bç”¨äº†"),n("code",[t._v("[super touchesBegan:touches withEvent:event];")]),t._v("ï¼Œåˆ™äº‹ä»¶å°†ä¼šæ²¿ç€å“åº”é“¾è½¬å‘ä¼ é€’ã€‚")]),t._v(" "),n("p",[t._v("æ¯”å¦‚ï¼Œæˆ‘ä»¬å­ç±»åŒ–ä¸€ä¸ª UIButtonï¼Œé‡å†™äº†"),n("code",[t._v("touchesBegan:withEvent:")]),t._v("ä¸”æ²¡æœ‰è°ƒç”¨ super ï¼Œé‚£ä¹ˆå½“ç‚¹å‡» button æ—¶ï¼Œä½ ä¼šå‘ç°æ·»åŠ åœ¨ button ä¸Šçš„ action å¹¶ä¸ä¼šè°ƒç”¨ï¼Œå› ä¸ºäº‹ä»¶é»˜è®¤åœ¨"),n("code",[t._v("touchesBegan:withEvent:")]),t._v("ä¸­å¤„ç†äº†ã€‚")]),t._v(" "),n("p",[t._v("ä»å®˜æ–¹æ–‡æ¡£ä¸­ï¼Œå–ä¸€å¼ äº‹ä»¶å“åº”é“¾çš„å›¾ç‰‡ï¼š")]),t._v(" "),n("p",[n("img",{attrs:{src:"/resources/chain.png",alt:""}})]),t._v(" "),n("hr"),t._v(" "),n("p",[t._v("å‚è€ƒé“¾æ¥ï¼š\n"),n("a",{attrs:{href:"https://developer.apple.com/documentation/uikit/touches_presses_and_gestures/using_responders_and_the_responder_chain_to_handle_events?language=objc#3004381",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://developer.apple.com/documentation/uikit/touches_presses_and_gestures/using_responders_and_the_responder_chain_to_handle_events"),n("OutboundLink")],1)])])},[],!1,null,null,null);s.default=a.exports}}]);