<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>常见汇编指令 | xindong</title>
    <meta name="description" content="🍎">
    <link rel="icon" href="/resources/favicon.ico">
  <link rel="apple-touch-icon" href="/resources/favicon.ico">
    
    <link rel="preload" href="/assets/css/0.styles.93490a24.css" as="style"><link rel="preload" href="/assets/js/app.e9db3fe7.js" as="script"><link rel="preload" href="/assets/js/2.45015a89.js" as="script"><link rel="preload" href="/assets/js/9.de5114d7.js" as="script"><link rel="prefetch" href="/assets/js/10.3fe60ad8.js"><link rel="prefetch" href="/assets/js/11.cd4facc5.js"><link rel="prefetch" href="/assets/js/12.32b4db9e.js"><link rel="prefetch" href="/assets/js/13.a55f585d.js"><link rel="prefetch" href="/assets/js/14.5b5dab30.js"><link rel="prefetch" href="/assets/js/15.2f3cb7d6.js"><link rel="prefetch" href="/assets/js/16.cc0f69f2.js"><link rel="prefetch" href="/assets/js/17.b5f6c5f1.js"><link rel="prefetch" href="/assets/js/18.9793b046.js"><link rel="prefetch" href="/assets/js/19.d40b04a0.js"><link rel="prefetch" href="/assets/js/20.f0fa6039.js"><link rel="prefetch" href="/assets/js/21.bccbb9fb.js"><link rel="prefetch" href="/assets/js/22.6c772d85.js"><link rel="prefetch" href="/assets/js/23.d3a71210.js"><link rel="prefetch" href="/assets/js/24.e8cf9784.js"><link rel="prefetch" href="/assets/js/25.bb524a79.js"><link rel="prefetch" href="/assets/js/26.388b503e.js"><link rel="prefetch" href="/assets/js/27.df0efcee.js"><link rel="prefetch" href="/assets/js/28.df8f6554.js"><link rel="prefetch" href="/assets/js/29.6129bc6c.js"><link rel="prefetch" href="/assets/js/3.1cbc7ba0.js"><link rel="prefetch" href="/assets/js/30.1b1abec7.js"><link rel="prefetch" href="/assets/js/31.6c913de6.js"><link rel="prefetch" href="/assets/js/32.b4fb7248.js"><link rel="prefetch" href="/assets/js/33.cf6426ee.js"><link rel="prefetch" href="/assets/js/34.08cc3265.js"><link rel="prefetch" href="/assets/js/35.6932c268.js"><link rel="prefetch" href="/assets/js/36.44cc8643.js"><link rel="prefetch" href="/assets/js/37.e1cc74b9.js"><link rel="prefetch" href="/assets/js/4.67660188.js"><link rel="prefetch" href="/assets/js/5.bc582d1b.js"><link rel="prefetch" href="/assets/js/6.347f88f8.js"><link rel="prefetch" href="/assets/js/7.6445c2aa.js"><link rel="prefetch" href="/assets/js/8.37f7e56f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.93490a24.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">xindong</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/objective-c/" class="nav-link">Objective-C</a></div><div class="nav-item"><a href="/lua/" class="nav-link">Lua</a></div><div class="nav-item"><a href="/java/" class="nav-link">Java</a></div><div class="nav-item"><a href="/assembly/" class="nav-link router-link-active">汇编</a></div><div class="nav-item"><a href="/others/" class="nav-link">其他</a></div><div class="nav-item"><a href="https://github.com/tbwas" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/objective-c/" class="nav-link">Objective-C</a></div><div class="nav-item"><a href="/lua/" class="nav-link">Lua</a></div><div class="nav-item"><a href="/java/" class="nav-link">Java</a></div><div class="nav-item"><a href="/assembly/" class="nav-link router-link-active">汇编</a></div><div class="nav-item"><a href="/others/" class="nav-link">其他</a></div><div class="nav-item"><a href="https://github.com/tbwas" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/assembly/assemblybasic.html" class="sidebar-link">汇编入门必备</a></li><li><a href="/assembly/assemblyinstructions.html" class="active sidebar-link">常见汇编指令</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="常见汇编指令"><a href="#常见汇编指令" aria-hidden="true" class="header-anchor">#</a> 常见汇编指令</h2> <h2 id="_0x0-引言"><a href="#_0x0-引言" aria-hidden="true" class="header-anchor">#</a> 0x0. 引言</h2> <p>好记性不如烂笔头，本文旨在记录一些日常工作中经常会遇到的汇编指令，并会不断更新。目前只包含<a href="/assembly/assemblyinstructions.html#_0x1-arm64">ARM</a>和<a href="/assembly/assemblyinstructions.html#_0x2-at-t">AT&amp;T</a>两种格式，以<a href="/assembly/assemblyinstructions.html#_0x1-arm64">ARM64</a>为主。</p> <h2 id="_0x1-arm64"><a href="#_0x1-arm64" aria-hidden="true" class="header-anchor">#</a> 0x1. ARM64</h2> <h3 id="mov"><a href="#mov" aria-hidden="true" class="header-anchor">#</a> mov</h3> <p>传送指令：将立即数传送到寄存器/内存单元，或互传内存单元和寄存器两者中的数据。</p> <p>例如：<code>mov x0, #0x1</code> / <code>mov $0x1, %rdi</code> 将立即数0x1移动到寄存器x0/rdi中</p> <h3 id="mvn"><a href="#mvn" aria-hidden="true" class="header-anchor">#</a> mvn</h3> <p>该指令与<strong>mov</strong>唯一不同的是：需要对操作数进行按位取反。</p> <h3 id="str"><a href="#str" aria-hidden="true" class="header-anchor">#</a> str</h3> <p><em>store register</em>. 将寄存器中的数据存到内存单元中。</p> <p>例如：<code>str x0, [sp, #0x28]</code> 将寄存器x0中的数据存到地址sp+0x28处</p> <h3 id="stp"><a href="#stp" aria-hidden="true" class="header-anchor">#</a> stp</h3> <p><em>store pair of registers</em>.</p> <p>例如：<code>stp x29, x30, [sp, #0x70]</code> 先将x29存到地址sp+0x70处，再将x30存到sp+0x78处 (<strong>Tip1</strong>)。</p> <div class="tip custom-block"><p><strong>Tip1:</strong>
64位下，寄存器大小为8bytes</p></div> <h3 id="ldr"><a href="#ldr" aria-hidden="true" class="header-anchor">#</a> ldr</h3> <p><em>load register</em>. 从内存中读取数据，存到寄存器中。</p> <p>例如：<code>ldr x1, [sp, #0x30]</code> 将内存地址sp+0x30处的数据加载到x1中。</p> <h3 id="ldp"><a href="#ldp" aria-hidden="true" class="header-anchor">#</a> ldp</h3> <p><em>load pair of registers.</em></p> <p>例如：<code>ldp x29, x30, [sp, #0x70]</code> 将内存地址sp+0x70处的数据加载到x29中，再将sp+0x78(<strong>Tip1</strong>)处的数据加载到x30中。</p> <h3 id="b"><a href="#b" aria-hidden="true" class="header-anchor">#</a> b</h3> <p><em>branch</em>. 无条件跳转。</p> <p>例如：<code>b 0x1b6b79cf8</code>  跳转到<code>0x1b6b79cf8</code>处继续执行。</p> <h3 id="bl"><a href="#bl" aria-hidden="true" class="header-anchor">#</a> bl</h3> <p><em>branch with link</em>. 将下一条指令地址copy到lr中，然后跳转。由于保存了下一条指令地址(相对于pc)，所以可实现子程序的返回，而<strong>b</strong>只能单纯的实现跳转，不能实现子程序返回。</p> <p>例如：</p> <div class="language-wasm line-numbers-mode"><pre class="language-wasm"><code>   <span class="token number">0x102b7d8a4</span> &lt;<span class="token number">+160</span>&gt;: bl   <span class="token number">0x102bda450</span> ; symbol stub for: objc_msgSend
-&gt; <span class="token number">0x102b7d8a8</span> &lt;<span class="token number">+164</span>&gt;: adrp x0, <span class="token number">107</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>当程序执行完<strong>bl</strong>指令时，lr中的内容应该是是<strong>bl</strong>下一条指令的地址，即<code>0x102b7d8a8</code>。通过控制台查看lr中的内容如下：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>fp <span class="token operator">=</span> 0x000000016d2853c0
lr <span class="token operator">=</span> 0x0000000102b7d8a8  `-<span class="token punctuation">[</span>AppDelegate application:didFinishLaunchingWithOptions:<span class="token punctuation">]</span> + <span class="token number">164</span> at AppDelegate.m:41:5
sp <span class="token operator">=</span> 0x000000016d285350
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="cbz"><a href="#cbz" aria-hidden="true" class="header-anchor">#</a> cbz</h3> <p><em>compare and branch on zero</em>. 比较操作数是否为0，若为0则跳转。</p> <p>例如：<code>cbz w24, 0x1b6b798f4</code> 若w24 (x24寄存器低32位) 中的数据为0，则跳转到<code>0x1b6b798f4</code>处执行 (<strong>Note1</strong>)。</p> <div class="warning custom-block"><p><strong>Note1:</strong> 跳转地址需要在<strong>cbz/cbnz</strong>指令之后的4~130字节内。</p></div> <h3 id="cbnz"><a href="#cbnz" aria-hidden="true" class="header-anchor">#</a> cbnz</h3> <p><em>compare and branch on non-zero</em>. 操作数不为0，则跳转。</p> <p>例如：<code>cbnz w27, 0x1b73c9e2c</code> 若w27中的数据不为0，则跳转到<code>0x1b73c9e2c</code>处执行 (<strong>Note1</strong>)。</p> <h3 id="lsl"><a href="#lsl" aria-hidden="true" class="header-anchor">#</a> lsl</h3> <p><em>logical shift left</em>. 左移位。</p> <p>例如：<code>str x0, [x1, x2, lsl #2]</code> 将x2中的值左移两位，再加上x1中的值，得到的结果为一个内存地址，最后将x0中的数据存到该内存中。</p> <h3 id="lsr"><a href="#lsr" aria-hidden="true" class="header-anchor">#</a> lsr</h3> <p><em>logical shift right</em>. 右移位。</p> <h3 id="cmp"><a href="#cmp" aria-hidden="true" class="header-anchor">#</a> cmp</h3> <p><em>compare</em>. 比较两个数是否相等，首先将两个数相减，若差为0，则ZF (<strong>Tip2</strong>) 为1，即两者相等。</p> <p><code>cmp w8, #0x3</code> 通过判断w8中的值与0x3的差值是否为0，即ZF (<strong>Tip2</strong>) 是否为1，来比较两者是否相等。</p> <div class="tip custom-block"><p><strong>Tip2:</strong>
ZF是零标志位寄存器。它记录相关指令执行后，其结果是否为0。若结果为0，则ZF=1；若结果为1，则ZF=0。</p></div> <h3 id="adrp"><a href="#adrp" aria-hidden="true" class="header-anchor">#</a> adrp</h3> <p><em>form pc-relative address to 4KB page</em>. 先将操作数左移12位，再将pc的低12位清零 (即3个十六进制位清零，得到一个页对齐地址)，最后两者相加，赋值给寄存器。</p> <p>例如：</p> <div class="language-wasm line-numbers-mode"><pre class="language-wasm"><code>   <span class="token number">0x1b703f074</span> &lt;<span class="token number">+44</span>&gt;:  adrp   x20, <span class="token number">270332</span>
-&gt; <span class="token number">0x1b703f078</span> &lt;<span class="token number">+48</span>&gt;:  ldr    x0, [x20, #<span class="token number">0x7a0</span>]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>执行<strong>adrp</strong>时，先将操作数270332 (十六进制为<code>0x41ffc</code>) 左移12位得到<code>0x41ffc000</code>，再将pc (<code>0x1b703f074</code>) 低12清零得到 <code>0x1b703f000</code>，最后两者相加得到<code>0x1f903b000</code>赋值给x20。通过控制台查看x20中的内容：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code> x19 <span class="token operator">=</span> 0x000000016ef25fb0
 x20 <span class="token operator">=</span> 0x00000001f903b000  
 x21 <span class="token operator">=</span> 0x0000000281454380
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="adr"><a href="#adr" aria-hidden="true" class="header-anchor">#</a> adr</h3> <p><em>load a program-relative or register-relative address into a register</em>. 是一条伪指令，遇到该指令时汇编器会生成一条<strong>add</strong>或<strong>sub</strong>指令，来计算pc和操作数的和或者差，最后将得到的结果，放在寄存器中。</p> <p>例如：</p> <div class="language-wasm line-numbers-mode"><pre class="language-wasm"><code>; 生成加法指令，即x0 = <span class="token number">0x1022c3b08</span> + <span class="token number">0x2fc48</span> = <span class="token number">0x1022f3750</span>
   <span class="token number">0x1022c3b08</span> &lt;<span class="token number">+108</span>&gt;: adr x0, #<span class="token number">0x2fc48</span>  ; _MergedGlobals + <span class="token number">16</span>
-&gt; <span class="token number">0x1022c3b0c</span> &lt;<span class="token number">+112</span>&gt;: <span class="token keyword">nop</span> 

; 生成减法指令，即x2 = <span class="token number">0x1022c3b10</span> - <span class="token number">0x390</span> = <span class="token number">0x1022c3780</span>
   <span class="token number">0x1022c3b10</span> &lt;<span class="token number">+116</span>&gt;: adr x2, #<span class="token number">-0x390</span> ; initializeAvailabilityCheck
-&gt; <span class="token number">0x1022c3b14</span> &lt;<span class="token number">+120</span>&gt;: <span class="token keyword">nop</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="brk"><a href="#brk" aria-hidden="true" class="header-anchor">#</a> brk</h3> <p><em>breakpoint instruction.</em> 用于生成断点指令异常。</p> <h3 id="tbz"><a href="#tbz" aria-hidden="true" class="header-anchor">#</a> tbz</h3> <p><em>test branch zero.</em> 测试位为0，则跳转。</p> <div class="language-wasm line-numbers-mode"><pre class="language-wasm"><code>tbz w24, #<span class="token number">0x6</span>, <span class="token number">0x19307005c</span> ; 即w24第<span class="token number">6</span>位，若为<span class="token number">0</span>，则跳转到<span class="token number">0x19307005c</span>执行
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>w24 二级制数为：0b00000111000000000000100000000110</code></p> <h3 id="tbnz"><a href="#tbnz" aria-hidden="true" class="header-anchor">#</a> tbnz</h3> <p><em>test branch no zero.</em> 测试位不为0，则跳转。</p> <div class="language-wasm line-numbers-mode"><pre class="language-wasm"><code>tbnz w24, #<span class="token number">0x6</span>, <span class="token number">0x19307005c</span> ; 即w24第<span class="token number">6</span>位，若不为<span class="token number">0</span>，则跳转到<span class="token number">0x19307005c</span>执行
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>w24 二级制数为：0b00000111000000000000100000000110</code></p> <h2 id="_0x2-at-t"><a href="#_0x2-at-t" aria-hidden="true" class="header-anchor">#</a> 0x2. AT&amp;T</h2> <h3 id="test"><a href="#test" aria-hidden="true" class="header-anchor">#</a> test</h3> <p>将指令后的两个数进行按位与操作，其结果影响ZF。通常用来判断某个数是否为0/nil。</p> <p>例如：</p> <div class="language-wasm line-numbers-mode"><pre class="language-wasm"><code>testq %rax, %rax ; 若%rax中的值为<span class="token number">0</span>，则ZF=<span class="token number">1</span>；反之，ZF=<span class="token number">0</span>，q表示四字长
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="sete"><a href="#sete" aria-hidden="true" class="header-anchor">#</a> sete</h3> <p>取ZF中的值，放入目标寄存器中。</p> <p>例如：</p> <div class="language-wasm line-numbers-mode"><pre class="language-wasm"><code>testq %rax, %rax  ; 两个寄存器中的值按位与，结果影响ZF
sete  %r12        ; 若%rax和%rbx相等，即ZF=<span class="token number">1</span>，则将%r12设为<span class="token number">1</span>，反之设为<span class="token number">0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="setne"><a href="#setne" aria-hidden="true" class="header-anchor">#</a> setne</h3> <p>取ZF中的值，然后取反，再放入目标寄存器中。</p> <p>例如：<code>setne %rax</code> 若ZF=1，则%rax设为0；反之设为1</p> <h3 id="je-jz"><a href="#je-jz" aria-hidden="true" class="header-anchor">#</a> je / jz</h3> <p>je 和 jz这两条指令虽然名字不同，但做的事情都是一样的。即ZF=1，则跳转。</p> <p>例如：</p> <div class="language-wasm line-numbers-mode"><pre class="language-wasm"><code>libobjc.A.dylib`objc_retain:
    <span class="token number">0x7fff50bad350</span> &lt;<span class="token number">+0</span>&gt;:  testq  %rdi, %rdi      ; 判断%rdi中的值<span class="token punctuation">(</span>第一个参数<span class="token punctuation">)</span>是否为nil
    <span class="token number">0x7fff50bad353</span> &lt;<span class="token number">+3</span>&gt;:  je     <span class="token number">0x7fff50bad371</span>  ; &lt;<span class="token number">+33</span>&gt; 若%rdi为nil，则跳转到<span class="token number">0x7fff50bad371</span>执行
    <span class="token number">0x7fff50bad355</span> &lt;<span class="token number">+5</span>&gt;:  js     <span class="token number">0x7fff50bad373</span>  ; &lt;<span class="token number">+35</span>&gt;
-&gt;  <span class="token number">0x7fff50bad357</span> &lt;<span class="token number">+7</span>&gt;:  movq   <span class="token punctuation">(</span>%rdi<span class="token punctuation">)</span>, %rax
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="jne-jnz"><a href="#jne-jnz" aria-hidden="true" class="header-anchor">#</a> jne / jnz</h3> <p>jne 和 jnz这两条指令做的事情也都是一样的。即ZF=0，则跳转。</p> <h3 id="js"><a href="#js" aria-hidden="true" class="header-anchor">#</a> js</h3> <p><em>jump if sign.</em>
若结果为负数，即SF=1，则进行跳转。</p> <div class="tip custom-block"><p class="custom-block-title">SF: 符号标志位</p> <p>它记录相关指令执行后，其结果是否为负。若结果为负，则SF=1；若为非负，则SF=0。</p></div> <h3 id="nop"><a href="#nop" aria-hidden="true" class="header-anchor">#</a> nop</h3> <p><em>no operation.</em> 不执行任何操作。是一条单字节指令。
<code>Opcode 90</code></p> <h3 id="ud2"><a href="#ud2" aria-hidden="true" class="header-anchor">#</a> ud2</h3> <p><em>undefined instruction.</em>
该指令用于生成一个无效操作码。当CPU试图执行无效或未定义的操作码时，将发生无效的<a href="https://wiki.osdev.org/Exceptions" target="_blank" rel="noopener noreferrer">操作码异常<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。<code>UD2</code>指令除了引发无效的操作码异常外，与<code>NOP</code>指令相同。</p> <div class="tip custom-block"><p>这里的异常是指CPU在发生“错误”时生成的。大多数情况下，有些异常并不是真正的错误，而是中断的一种类型。比如: Page Fault。异常分类如下：</p> <ol><li><strong>Faults</strong> (错误)：这些错误可以被纠正，程序可以像什么都没有发生一样继续运行。</li> <li><strong>Traps</strong> (陷阱)：陷阱指令执行后会立即被报告。</li> <li><strong>Aborts</strong> (终止)：一些严重的不可恢复的错误。</li></ol></div> <h3 id="ret"><a href="#ret" aria-hidden="true" class="header-anchor">#</a> ret</h3> <p>该指令用于子程序的返回。将栈顶数据(返回地址)弹出，赋值给 ip 寄存器，此时 sp 会增加一个内存单元大小，来释放栈空间。</p> <div class="tip custom-block"><p>栈底 <strong>[</strong> ... <strong>|</strong> ... , parameters, return address <strong>|</strong> previous frame pointer, <code>%rbp</code> <strong>]</strong> 栈顶</p> <p><code>pop %rbp</code> 👇<br>
栈底 <strong>[</strong> ... <strong>|</strong> ... , parameters, return address <strong>]</strong> 栈顶</p> <p><code>ret</code> 👇<br>
栈底 <strong>[</strong> ... <strong>|</strong> ... , parameters <strong>]</strong> 栈顶</p> <p><code>caller release parameters</code> 👇<br>
栈底 <strong>[</strong> ... <strong>|</strong> ... <strong>]</strong> 栈顶</p></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最后更新: </span> <span class="time">4/9/2020, 3:11:50 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/assembly/assemblybasic.html" class="prev">
          汇编入门必备
        </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.e9db3fe7.js" defer></script><script src="/assets/js/2.45015a89.js" defer></script><script src="/assets/js/9.de5114d7.js" defer></script>
  </body>
</html>
